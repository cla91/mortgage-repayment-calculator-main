(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();function o(r,e){if(r.getAttribute("name")=="mortgage-type"){const t=r.closest(".radio-container").querySelector(".error-message");t.innerHTML=`${e}`,e==""?(r.setAttribute("aria-invalid","false"),t.classList.add("sr-only")):(r.setAttribute("aria-invalid","true"),t.classList.remove("sr-only"));return}const s=r.closest("label"),n=s.querySelector(".error-message");if(e==""){n.innerHTML=`${e}`,n.classList.add("sr-only"),s.classList.remove("error"),r.setAttribute("aria-invalid","false");return}n.innerHTML=`${e}`,n.classList.remove("sr-only"),s.classList.add("error"),r.setAttribute("aria-invalid","true")}class i{static cleanNumber(e,s){return s?String(e).replace(/[^0-9.]/g,""):String(e).replace(/[^0-9]/g,"")}static formatNumber(e,s){return isNaN(parseFloat(e))?(o(s,"Input a valid number."),e):new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2,trailingZeroDisplay:"stripIfInteger"}).format(parseFloat(e))}}const d=document.querySelector(".results-empty"),c=document.querySelector(".results-full"),f=c.querySelector("[data-monthly-repayments]"),m=c.querySelector("[data-payments-type]"),h=c.querySelector("[data-full-repayments]");class p{constructor(e,s,n,t){this.amount=Number(e),this.years=Number(s),this.interest=Number(n),this.type=t,this.monthlyPayment=0,this.totalRepayments=0,this.totalInterests=0,this.init()}init(){this.type=="repayment"?this.calculateRepaymentMortgage():this.type=="interest-only"&&this.calculateInterestsOnlyMortgage()}calculateRepaymentMortgage(){const e=this.interest/100/12,s=this.years*12;this.monthlyPayment=this.amount*(e*Math.pow(1+e,s)/(Math.pow(1+e,s)-1)),this.monthlyPayment=+this.monthlyPayment.toFixed(2),this.totalRepayments=+(this.monthlyPayment*s).toFixed(2),this.totalInterests=+(this.totalRepayments-this.amount).toFixed(2)}calculateInterestsOnlyMortgage(){const e=this.interest/100/12,s=this.years*12;this.monthlyPayment=+(this.amount*e).toFixed(2),this.totalInterests=+(this.monthlyPayment*s).toFixed(2),this.totalRepayments=+(this.amount+this.totalInterests).toFixed(2)}displayResults(){f.innerHTML=`£${i.formatNumber(this.monthlyPayment)}`,this.type=="interest-only"?(m.innerHTML="Interests",h.innerHTML=`£${i.formatNumber(this.totalInterests)}`):(m.innerHTML="Total",h.innerHTML=`£${i.formatNumber(this.totalRepayments)}`),d.classList.add("hidden"),c.classList.remove("hidden")}}const u=document.forms[0];function g(){u.addEventListener("submit",r=>{r.preventDefault();const e=new FormData(u);let s=!0;if([...e.entries()].forEach(n=>{if(n[1]==""){const t=u.querySelector(`[name=${n[0]}]`);o(t,"This field is required"),s=!1}if(n[1]=="0"){const t=u.querySelector(`[name=${n[0]}]`);o(t,"Input a valid number"),s=!1}}),[...e.entries()].length<4){const n=u.querySelector("[name=mortgage-type]");o(n,"This field is required"),s=!1}if(s){let n=i.cleanNumber(e.get("amount")),t=i.cleanNumber(e.get("term")),a=i.cleanNumber(e.get("interest"),!0),l=e.get("mortgage-type");new p(n,t,a,l).displayResults()}})}const b=document.querySelectorAll("input[type=text]");function v(){b.forEach(r=>{r.addEventListener("input",L),r.addEventListener("blur",I)})}function L(r){if(this.getAttribute("aria-invalid")=="true"&&o(this,""),this.getAttribute("name")=="interest"){this.value=i.cleanNumber(this.value,!0);return}this.value=i.cleanNumber(this.value,!1)}function I(r){this.value!=""&&(this.value=i.formatNumber(this.value,this))}const y=document.querySelectorAll("input[type=radio]");function N(){M(),S()}function S(){y.forEach(r=>{r.addEventListener("change",()=>{o(r,"")})})}function M(){CSS.supports("selector(:has(*))")||y.forEach(r=>{r.addEventListener("change",()=>{document.querySelectorAll(".radio-label").forEach(s=>{s.classList.remove("active")}),r.checked&&r.closest("label").classList.add("active")})})}v();N();g();
